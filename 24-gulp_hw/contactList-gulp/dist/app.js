class ContactsApi{static API="https://6425805b7ac292e3cf0278f7.mockapi.io/api/contacts/";static request(t="",e="GET",n,a){return fetch(ContactsApi.API+t,{method:e,body:a?JSON.stringify(a):void 0,headers:{"Content-type":"application/json"}}).then(t=>{if(t.ok)return t.json();throw new Error(""+n)})}static getList(){return ContactsApi.request("","GET","cant retrieve contact list from server")}static create(t){return ContactsApi.request("","POST","cant create contact on server",t)}static delete(t){return ContactsApi.request(t,"DELETE","cant delete contact on server")}static update(t,e){return ContactsApi.request(t,"PUT","cant update contact on server",e)}}const SELECTOR_CONTACT_INFORM="#contactInform",CLASS_DELETE_BTN="deleteBtn",CLASS_EDIT_BTN="editBtn",form=document.querySelector("#contactsForm"),$contactsContainer=$("#contactsContainer");let contactList=[];function onFormSubmit(t){t.preventDefault();t=getContactData();isValidData(t)?(t.id?updateContact:createNewContact)(t):showError(new Error("enter wrong data"))}function updateContact(t){ContactsApi.update(t.id,t).then(e=>{replaceContact(t.id,e),clearForm(),contactList=contactList.map(t=>t.id===e.id?e:t)}).catch(t=>showError(t))}function createNewContact(t){ContactsApi.create(t).then(t=>{renderContact(t),contactList.push(t),clearForm()}).catch(t=>showError(t))}function deleteContact(t){t=getContactEl(t.target);const e=findElemettId(t);ContactsApi.delete(e).catch(t=>showError(t)),contactList=contactList.filter(t=>t.id!==e),t.remove()}function editContact(t){fillForm(findElById(findElemettId(t.target)))}function isValidData(t){return t.firstName&&t.lastName&&t.phone&&!isNaN(t.phone)}function getContactData(){return{...findElById(form.id.value)||{},firstName:form.firstName.value,lastName:form.lastName.value,phone:form.phone.value}}function replaceContact(t,e){t=document.querySelector(`[data-id = "${t}"]`),e=getTemplateContsct(e);t.outerHTML=e}function renderContactsList(t){t=t.map(getTemplateContsct);$contactsContainer.html(t)}function renderContact(t){t=getTemplateContsct(t);$contactsContainer.append(t)}function getTemplateContsct(t){return`
    <tr id = "contactInform" 
    data-id = "${t.id}">
        <td>${t.firstName}</td>
        <td>${t.lastName}</td>
        <td>${t.phone}</td>
        <td><button class="${CLASS_EDIT_BTN}">Edit</button></td>
        <td><button class="${CLASS_DELETE_BTN}">Delete</button></td>
    </tr> 
    `}function getContactEl(t){return t.closest(SELECTOR_CONTACT_INFORM)}function findElemettId(t){return getContactEl(t).dataset.id}function findElById(e){return contactList.find(t=>t.id===e)}function fillForm(t){form.firstName.value=t.firstName,form.lastName.value=t.lastName,form.phone.value=t.phone,form.id.value=t.id}function clearForm(){form.id.value="",form.reset()}function showError(t){alert(t.message)}form.addEventListener("submit",onFormSubmit),$contactsContainer.on("click","."+CLASS_DELETE_BTN,deleteContact).on("click","."+CLASS_EDIT_BTN,editContact),ContactsApi.getList().then(t=>{renderContactsList(t),contactList=t}).catch(t=>showError(t));
//# sourceMappingURL=app.js.map
